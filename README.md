# Xray 多端口管理脚本

这是一个功能强大的 Xray 管理脚本，专为 VLESS + Reality 协议设计，旨在简化多端口、多用户的配置和管理流程。脚本通过交互式菜单提供服务，支持**直连**和 **SOCKS5 中转（跳转）** 两种模式。

此版本基于社区现有脚本进行了关键的Bug修复和功能完善。

## 主要功能

- **一键安装与卸载 Xray**：自动处理环境依赖，快速部署或清理。
- **交互式菜单，易于上手**：所有操作通过数字菜单选择，无需记忆复杂命令。
- **支持多端口、多用户管理**：轻松在同一台服务器上为不同用户开设多个端口。
- **快速添加 VLESS + Reality 配置**：自动化生成 UUID、密钥对、ShortID 等复杂参数。
- **强大的中转（跳转）功能**：可为每个端口独立配置 SOCKS5 代理，实现流量跳转。
- **自动集成 HAProxy**：在配置SOCKS5中转时，自动安装和配置 HAProxy，简化客户端连接。
- **连接信息可视化**：自动生成 VLESS 链接及二维码，方便导入各种客户端。
- **配置备份与恢复**：一键备份所有端口配置信息，并可轻松恢复。
- **数据与日志管理**：支持在线更新 Geo 数据文件和查看 Xray 运行日志。

## 快速开始

### 环境要求
- 一台全新的服务器
- 推荐使用 Debian 10+ 或 Ubuntu 20.04+ 操作系统
- root 权限

### 安装与使用
请在您的服务器上以 root 权限运行以下命令：

```bash
bash <(curl -L https://raw.githubusercontent.com/5548269/my-script/main/install.sh)
```

脚本会自动检测并安装所需的依赖（如 `jq`, `curl`, `haproxy` 等），然后进入主管理菜单。

## 脚本菜单预览

```
---------- Xray 多端口管理脚本 V2.0.12 -------------
  1. 安装/重装 Xray
  2. 添加新端口配置
  3. 查看所有端口配置
  4. 修改端口配置
  5. 删除端口配置
  6. 显示所有端口连接信息
  7. 更新 GeoIP 和 GeoSite 数据
  8. 备份与恢复
  9. 查看 Xray 日志
  10. 帮助信息
  11. 卸载 Xray
  12. 根据当前Xray配置信息生成HAProxy配置
  0. 退出
------------------------------------
```

## 特别说明

1.  **Bug 修复**
    此脚本版本修复了原版脚本中存在的**密钥生成与解析错误**。原版脚本在某些情况下会错误地将 `Hash32` 值当作公钥，导致生成的 VLESS 链接无效。此版本已彻底修复该问题，确保生成的密钥对永远匹配，避免连接失败。

2.  **脚本自洽**
    为了确保安装过程的稳定性和独立性，本脚本引用的 `install-release.sh` (Xray官方安装脚本) 已托管于本仓库内。这意味着安装过程不会因为上游官方仓库的变动或网络问题而失败，可靠性更高。

## 授权许可 (License)

本项目采用 [MIT](LICENSE) 授权许可。
